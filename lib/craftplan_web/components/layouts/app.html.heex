<nav class="fixed top-0 z-50 w-full border-b border-stone-200 bg-stone-50 print:hidden">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex h-16 items-center justify-between">
      <div class="flex-shrink-0">
        <.link navigate={~p"/"}>
          <div class="flex items-center">
            <svg
              class="mr-1 h-7 w-7"
              xmlns="http://www.w3.org/2000/svg"
              width="66"
              height="54"
              viewBox="0 0 66 54"
              fill="none"
            >
              <g clip-path="url(#clip0_2_691)">
                <path
                  d="M21.1262 0.100903C11.2779 1.06643 3.22266 5.53542 0.850231 11.3286C-0.418743 14.501 0.160571 18.0045 2.42266 20.7907L3.19507 21.7562L3.05714 30.2528C2.91921 39.3012 2.97438 40.0184 3.71922 41.5633C4.46405 43.1357 5.23647 43.6322 9.62271 45.4805C18.9745 49.4254 24.0504 51.2737 27.5539 52.0737C28.7677 52.3495 32.1884 52.7082 32.7401 52.5978C35.4987 52.1013 58.1472 47.0254 58.7265 46.7495C59.1679 46.5288 59.7196 46.0874 59.9955 45.7012C60.961 44.3771 60.9886 44.0736 61.0989 33.6184L61.2093 23.9907L61.6782 23.6321C62.6713 22.9149 63.9679 21.3976 64.492 20.3493C66.8093 15.632 64.2989 10.6665 58.092 7.63199C50.9195 4.12852 40.6022 1.25953 31.3884 0.211249C29.2366 0.0181442 22.9469 -0.0922018 21.1262 0.100903ZM28.8228 2.91472C31.8573 3.16299 35.1125 3.63196 38.6988 4.37679C42.9195 5.28715 42.8367 5.23197 40.0229 5.56301C35.5539 6.08715 31.416 7.38371 28.4366 9.12165C22.4504 12.5975 19.6642 18.1148 21.3745 22.9976C21.7331 24.0459 22.5607 25.2873 23.3883 26.0045C24.2159 26.7769 24.078 26.7769 21.7331 26.2252C18.2021 25.37 14.0089 23.6873 8.35373 20.901C5.12612 19.301 4.79509 19.1079 4.29853 18.3907C2.09162 15.1631 3.00197 11.3286 6.75372 8.29406C11.7469 4.26645 19.9676 2.28023 28.8228 2.91472ZM48.6575 8.29406C55.0299 8.87338 60.1058 11.301 61.761 14.5286C62.4782 15.9355 62.561 17.4803 61.9817 18.7217C61.4575 19.8252 60.6851 20.7631 59.6368 21.4804C58.3127 22.3907 58.2023 22.8045 58.2023 26.8873C58.2023 28.8183 58.1472 33.3701 58.092 36.9563C58.0092 42.6943 57.9541 43.5495 57.7058 43.8529C57.4575 44.1564 55.3058 44.6805 44.9333 46.9702C38.0919 48.4874 32.2711 49.7288 31.9953 49.7288C31.1953 49.7288 30.6711 49.3702 30.2573 48.5426C29.8711 47.7702 29.8711 47.5495 29.8711 43.9357C29.8711 41.8391 29.8987 37.0667 29.9539 33.3149C30.0366 25.5356 30.1194 26.0321 28.4366 25.5356C25.7056 24.7631 24.1056 23.0528 23.8021 20.6528C23.3883 17.4803 26.3952 13.3975 30.7263 11.1906C35.416 8.84579 42.285 7.74233 48.6575 8.29406ZM8.29856 24.1562C15.1124 27.577 21.5676 29.6459 26.147 29.839L27.1125 29.8666L27.0849 35.4115C27.0573 38.4736 27.0021 42.2805 26.947 43.9081C26.8642 46.2529 26.8918 47.053 27.1125 47.853C27.3608 48.8461 27.3608 48.8461 27.0021 48.8461C25.4849 48.8461 7.63649 41.7012 6.72613 40.7357C5.87096 39.8253 5.87096 39.577 6.00889 31.0804C6.09165 26.7494 6.20199 23.1907 6.28475 23.1907C6.31234 23.2183 7.25028 23.6597 8.29856 24.1562Z"
                  fill="black"
                />
                <path
                  d="M28.8228 2.91472C31.8573 3.16299 35.1125 3.63196 38.6988 4.37679C42.9195 5.28715 42.8367 5.23197 40.0229 5.56301C35.5539 6.08715 31.416 7.38371 28.4366 9.12165C22.4504 12.5975 19.6642 18.1148 21.3745 22.9976C21.7331 24.0459 22.5607 25.2873 23.3883 26.0045C24.2159 26.7769 24.078 26.7769 21.7331 26.2252C18.2021 25.37 14.0089 23.6873 8.35373 20.901C5.12612 19.301 4.79509 19.1079 4.29853 18.3907C2.09162 15.1631 3.00197 11.3286 6.75372 8.29406C11.7469 4.26645 19.9676 2.28023 28.8228 2.91472Z"
                  fill="black"
                />
                <path
                  d="M8.29856 24.1562C15.1124 27.577 21.5676 29.6459 26.147 29.839L27.1125 29.8666L27.0849 35.4115C27.0573 38.4736 27.0021 42.2805 26.947 43.9081C26.8642 46.2529 26.8918 47.053 27.1125 47.853C27.3608 48.8461 27.3608 48.8461 27.0021 48.8461C25.4849 48.8461 7.63649 41.7012 6.72613 40.7357C5.87096 39.8253 5.87096 39.577 6.00889 31.0804C6.09165 26.7494 6.20199 23.1907 6.28475 23.1907C6.31234 23.2183 7.25028 23.6597 8.29856 24.1562Z"
                  fill="black"
                />
                <path
                  d="M31.1677 13.232C29.1815 14.0596 28.1608 14.9424 27.4435 16.5424C26.5884 18.4183 26.7815 20.6803 27.9677 22.4735C28.4918 23.2735 28.6573 23.3838 29.1539 23.3838C29.8711 23.3838 30.5884 22.8597 30.7263 22.1976C30.8091 21.839 30.6987 21.4252 30.2849 20.7079C29.7056 19.5769 29.5953 18.6389 30.0366 17.7286C30.3953 16.9562 31.416 16.1286 32.2711 15.8803C33.6505 15.4941 34.1746 14.2527 33.3746 13.232C32.9608 12.7079 32.4367 12.6803 31.1677 13.232Z"
                  fill="black"
                />
                <path
                  d="M35.5539 31.0252C34.7263 31.3563 34.6988 31.6321 34.5608 37.4529C34.4505 42.7495 34.4505 42.9426 34.7815 43.3564C35.2505 43.9357 36.3539 43.9357 36.9608 43.3839L37.3746 42.9977L37.485 37.6184C37.5953 31.7425 37.5677 31.5218 36.6574 31.108C36.1057 30.8045 36.0781 30.8045 35.5539 31.0252Z"
                  fill="black"
                />
              </g>
              <defs>
                <clipPath id="clip0_2_691">
                  <rect width="66" height="53.122" fill="white" />
                </clipPath>
              </defs>
            </svg>
            <span class="ml-1 text-lg font-semibold">Craftplan</span>
          </div>
        </.link>
      </div>

      <ul
        :if={String.starts_with?(assigns[:current_path] || "", "/manage")}
        id="nav-items-app"
        class="shadow-xs absolute left-1/2 flex -translate-x-1/2 items-center space-x-4 rounded-lg border border-stone-200 bg-white px-1 py-1"
      >
        <li>
          <.link
            navigate={~p"/manage/production"}
            class={"#{if assigns[:nav_section] == :production or String.starts_with?(assigns[:current_path] || "", "/manage/production"), do: "bg-stone-200/60 border border-stone-300 text-stone-900", else: "border border-transparent text-stone-600 hover:bg-stone-200/50 hover:text-stone-900"} flex items-center rounded-md px-2 py-1 text-sm tracking-wide transition-colors duration-200"}
          >
            <svg class="mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
              />
            </svg>
            Production
          </.link>
        </li>
        <li>
          <.link
            navigate={~p"/manage/inventory"}
            class={"#{if assigns[:nav_section] == :inventory or String.starts_with?(assigns[:current_path] || "", "/manage/inventory"), do: "bg-stone-200/60 border border-stone-300 text-stone-900", else: "border border-transparent text-stone-600 hover:bg-stone-200/50 hover:text-stone-900"} flex items-center rounded-md px-2 py-1 text-sm tracking-wide transition-colors duration-200"}
          >
            <svg class="mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"
              />
            </svg>
            Inventory
          </.link>
        </li>
        <li>
          <.link
            navigate={~p"/manage/purchasing"}
            class={"#{if assigns[:nav_section] == :purchasing or String.starts_with?(assigns[:current_path] || "", "/manage/purchasing"), do: "bg-stone-200/60 border border-stone-300 text-stone-900", else: "border border-transparent text-stone-600 hover:bg-stone-200/50 hover:text-stone-900"} flex items-center rounded-md px-2 py-1 text-sm tracking-wide transition-colors duration-200"}
          >
            <svg class="mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 3h18M7 7h10M5 11h14M7 15h10M9 19h6"
              />
            </svg>
            Purchasing
          </.link>
        </li>
        <li>
          <.link
            navigate={~p"/manage/products"}
            class={"#{if assigns[:nav_section] == :products or String.starts_with?(assigns[:current_path] || "", "/manage/products"), do: "bg-stone-200/60 border border-stone-300 text-stone-900", else: "border border-transparent text-stone-600 hover:bg-stone-200/50 hover:text-stone-900"} flex items-center rounded-md px-2 py-1 text-sm tracking-wide transition-colors duration-200"}
          >
            <svg class="mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"
              />
            </svg>
            Products
          </.link>
        </li>
        <li>
          <.link
            navigate={~p"/manage/orders"}
            class={"#{if assigns[:nav_section] == :orders or String.starts_with?(assigns[:current_path] || "", "/manage/orders"), do: "bg-stone-200/60 border border-stone-300 text-stone-900", else: "border border-transparent text-stone-600 hover:bg-stone-200/50 hover:text-stone-900"} flex items-center rounded-md px-2 py-1 text-sm tracking-wide transition-colors duration-200"}
          >
            <svg class="mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"
              />
            </svg>
            Orders
          </.link>
        </li>
        <li>
          <.link
            navigate={~p"/manage/customers"}
            class={"#{if assigns[:nav_section] == :customers or String.starts_with?(assigns[:current_path] || "", "/manage/customers"), do: "bg-stone-200/60 border border-stone-300 text-stone-900", else: "border border-transparent text-stone-600 hover:bg-stone-200/50 hover:text-stone-900"} flex items-center rounded-md px-2 py-1 text-sm tracking-wide transition-colors duration-200"}
          >
            <svg class="mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"
              />
            </svg>
            Customers
          </.link>
        </li>
        <li>
          <.link
            navigate={~p"/manage/settings"}
            class={"#{if assigns[:nav_section] == :settings or String.starts_with?(assigns[:current_path] || "", "/manage/settings"), do: "bg-stone-200/60 border border-stone-300 text-stone-900", else: "border border-transparent text-stone-600 hover:bg-stone-200/50 hover:text-stone-900"} flex items-center rounded-md px-2 py-1 text-sm tracking-wide transition-colors duration-200"}
          >
            <svg class="mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
              />
            </svg>
            Settings
          </.link>
        </li>
      </ul>

      <ul
        :if={not String.starts_with?(assigns[:current_path] || "", "/manage")}
        id="nav-items-app"
        class="shadow-xs absolute left-1/2 flex -translate-x-1/2 items-center space-x-4 rounded-lg border border-stone-200 bg-white px-1 py-1"
      >
        <li>
          <.link
            navigate={~p"/"}
            class={"#{if assigns[:current_path] == "/", do: "bg-stone-200/60 border border-stone-300 text-stone-900", else: "border border-transparent text-stone-600 hover:bg-stone-200/50 hover:text-stone-900"} flex items-center rounded-md px-2 py-1 text-sm tracking-wide transition-colors duration-200"}
          >
            <svg class="mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1h2"
              />
            </svg>
            Home
          </.link>
        </li>
        <li>
          <.link
            navigate={~p"/catalog"}
            class={"#{if assigns[:current_path] == "/catalog", do: "bg-stone-200/60 border border-stone-300 text-stone-900", else: "border border-transparent text-stone-600 hover:bg-stone-200/50 hover:text-stone-900"} flex items-center rounded-md px-2 py-1 text-sm tracking-wide transition-colors duration-200"}
          >
            <svg class="mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
              />
            </svg>
            Products
          </.link>
        </li>
        <li>
          <.link
            navigate={~p"/catalog"}
            class={"#{if assigns[:current_path] == "/contact", do: "bg-stone-200/60 border border-stone-300 text-stone-900", else: "border border-transparent text-stone-600 hover:bg-stone-200/50 hover:text-stone-900"} flex items-center rounded-md px-2 py-1 text-sm tracking-wide transition-colors duration-200"}
          >
            <svg class="mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
              />
            </svg>
            Contact
          </.link>
        </li>
        <li>
          <.link
            navigate={~p"/catalog"}
            class={"#{if assigns[:current_path] == "/about", do: "bg-stone-200/60 border border-stone-300 text-stone-900", else: "border border-transparent text-stone-600 hover:bg-stone-200/50 hover:text-stone-900"} flex items-center rounded-md px-2 py-1 text-sm tracking-wide transition-colors duration-200"}
          >
            <svg class="mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
              />
            </svg>
            About us
          </.link>
        </li>
      </ul>

      <div class="flex w-full justify-end">
        <ul class="flex items-center space-x-8">
          <li :if={
            assigns[:conn] != nil and
              not String.starts_with?(assigns[:current_path] || "", "/manage")
          }>
            {live_render(@conn, CraftplanWeb.CartLive,
              id: "cart_live",
              session: %{"cart_id" => Plug.Conn.get_session(@conn, :cart_id)},
              sticky: true
            )}
          </li>
          <li :if={@current_user != nil} class="relative">
            <button
              type="button"
              phx-click={JS.toggle(to: "#user-dropdown-manage")}
              phx-click-away={JS.hide(to: "#user-dropdown-manage")}
              class="flex items-center px-3 py-1 text-sm tracking-wide text-stone-600 transition-colors duration-200 hover:text-stone-900"
            >
              <span>{@current_user.email}</span>
              <svg
                id="user-dropdown-manage-chevron"
                class="ml-2 h-4 w-4 transform transition-transform duration-200"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                />
              </svg>
            </button>
            <div
              id="user-dropdown-manage"
              class="absolute right-0 mt-2 hidden w-48 transform rounded-md border border-stone-100 bg-white py-2 shadow-lg transition-all duration-200 ease-out"
            >
              <.link
                href={~p"/sign-out"}
                class="flex items-center space-x-2 px-4 py-2 text-sm text-stone-600 hover:bg-stone-50 hover:text-stone-900"
              >
                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                  />
                </svg>
                <span>
                  Log out
                </span>
              </.link>
            </div>
          </li>

          <li :if={@current_user == nil}>
            <.link href={~p"/sign-in"}>
              <.button variant={:primary}>
                Log in
              </.button>
            </.link>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>

<main class="px-4 pt-20 pb-20 sm:px-6 lg:px-8">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <.flash_group flash={@flash} />
    {@inner_content}
  </div>
</main>
